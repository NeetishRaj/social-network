{
  "version": 3,
  "file": "URLHandlers.js",
  "sourceRoot": "../..",
  "sources": [
    "coffee/URLHandlers.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\nmime = require 'mime'\npath = require 'path'\nurl  = require 'url'\nfs   = require 'fs'\n\nmodule.exports = class\n  constructor: ->\n    @handlers = []\n\n  add: ( method, pattern, handler ) ->\n    params = []\n\n    if typeof pattern is 'string'\n      pattern = pattern.replace /:([_a-z][_a-z0-9]*)/gi, ( a, b ) ->\n        if ~ params.indexOf b\n          throw Error 'You have the same param name: ' + b\n\n        params.push b\n\n        return '([^/]+?)'\n\n      pattern = RegExp '^' + pattern + '/?$'\n\n    @handlers.push { method, pattern, handler, params }\n\n    return this\n\n  handle: ( req, res ) ->\n    for { method, pattern, handler, params } in @handlers\n      unless method is req.method and ( match = pattern.exec req.url )\n        continue\n\n      req.params = {}\n\n      for i in [ 0 ... params.length ]\n        req.params[ params[ i ] ] = match[ i + 1 ]\n\n      return handler\n\n  parseURL: ( req ) ->\n    # console.log url.parse req.url\n\n    if req.headers.referer\n      # match protocol and host\n      return req.url.slice req.headers.referer.replace( /^(?:[a-z]+:\\/\\/)(?:[\\w.]+(?::\\d+)?)/gi, '' ).length\n\n    return req.url\n\nmodule.exports.static = ( scope ) ->\n  ( req, res ) ->\n    filepath = path.join scope, req.url\n\n    if ( type = mime.getType filepath )\n      headers = 'Content-Type': type\n\n    fs.access filepath, fs.constants.F_OK | fs.constants.R_OK, ( err ) ->\n      if err\n        res.writeHead 404, headers\n        res.end()\n        return\n\n      fs.readFile filepath, 'utf8', ( err, data ) ->\n        if err\n          res.writeHead 404, headers\n          res.end()\n        else\n          res.writeHead 200, headers\n          res.end data"
  ]
}